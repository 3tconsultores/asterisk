; extensions.conf - the Asterisk dial plan
;
; Static extension configuration file, used by
; the pbx_config module. This is where you configure all your
; inbound and outbound calls in Asterisk.
;
; This configuration file is reloaded
; - With the "dialplan reload" command in the CLI
; - With the "reload" command (that reloads everything) in the CLI

;
; The "General" category is for certain variables.
;
[general]
static=yes
writeprotect=no
;autofallthrough=no
;extenpatternmatchnew=no
clearglobalvars=no
;userscontext=default
;#include "filename.conf"
;#include <filename.conf>
;#include filename.conf
;#exec /opt/bin/build-extra-contexts.sh
;#exec /opt/bin/build-extra-contexts.sh --foo="bar"
;#exec </opt/bin/build-extra-contexts.sh --foo="bar">
;#exec "/opt/bin/build-extra-contexts.sh --foo=\"bar\""

[globals]
7531277=dahdi/3
7532232=dahdi/1
CONSOLE=Console/dsp                             ; Console interface for demo
;CONSOLE=DAHDI/1
;CONSOLE=Phone/phone0
IAXINFO=guest                                   ; IAXtel username/password
;IAXINFO=myuser:mypass
TRUNK=DAHDI/G2                                  ; Trunk interface
TRUNKMSD=1                                      ; MSD digits to strip (usually 1 or 0)
;TRUNK=IAX2/user:pass@provider
;FREENUMDOMAIN=mydomain.com                     ; domain to send on outbound
                                                ; freenum calls (uses
outbound-freenum
                                                ; context)


[default]
;
; By default we include the demo.  In a production system, you
; probably don't want to have the demo there.
;
include => demo
ignorepat => 9

;------------------------------------------------------------------------------
;
; CENTRAL TELEFONICA IP CLINICA NEMESIS
; CARACAS COLINAS DE BELLO MONTE
; PRUEBA PILOTO : estatus de las llamadas
NOANSWER,BUSY,CHANUNAVAIL,CONGESTION,ANSWER
;
;------------------------------------------------------------------------------



;--------------------------------------------------------------------
; LLAMADAS IP INTERNAS
;--------------------------------------------------------------------
; Administracion - Sra Hiely y Sra Nidia -         126
; Asistentes Administrativas -                     128
; Fax Administrativo -                             123
; Consultorio 1 / Bio-Gym Doctora Yetsica -        131
; Consultorio 2 / Doctora Mara, Doctora Ghiselle - 106
; Consultorio 3 / Microdermoabracion -             130
; Unidad odontologica 1 y 2 -                      127
; Recepcion estetica -                             103
; Recepcion Odontologia -                          129
; Grupo Alion -                                    110
; Soluciones Medicas -                             115
; Recepcion Caja     -                             124
; Mercamed           -                             111
;--------------------------------------------------------------------

exten => 81,1,VoicemailMain(${CALLERID(num)}@default)
exten => 88,1,VoicemailMain()

exten => 126,1,Dial(SIP/administracion,30)
exten => 126,2,Goto(126-${DIALSTATUS},1)
exten => 126-NOANSWER,1,Voicemail(126,u)
exten => 126-NOANSWER,2,Hangup()
exten => 126-BUSY,1,Voicemail(126,b)
exten => 126-BUSY,2,Hangup()
exten => 126-CHANUNAVAIL,1,Voicemail(126,u)
exten => 126-CHANUNAVAIL,2,Hangup()
exten => 126-CONGESTION,1,Voicemail(126,u)
exten => 126-CONGESTION,2,Hangup()
exten => 126-ANSWER,1,Answer()
exten => 126-ANSWER,2,Hangup()

exten => 128,1,Dial(SIP/aadministracion,30)
exten => 128,2,Goto(128-${DIALSTATUS},1)
exten => 128-NOANSWER,1,Voicemail(128,u)
exten => 128-NOANSWER,2,Hangup()
exten => 128-BUSY,1,Voicemail(128,b)
exten => 128-BUSY,2,Hangup()
exten => 128-CHANUNAVAIL,1,Voicemail(128,u)
exten => 128-CHANUNAVAIL,2,Hangup()
exten => 128-CONGESTION,1,Voicemail(128,u)
exten => 128-CONGESTION,2,Hangup()
exten => 128-ANSWER,1,Answer()
exten => 128-ANSWER,2,Hangup()

exten => 124,1,Dial(SIP/recepcion,30)
exten => 124,2,Goto(124-${DIALSTATUS},1)
exten => 124-NOANSWER,1,Voicemail(124,u)
exten => 124-NOANSWER,2,Hangup()
exten => 124-BUSY,1,Voicemail(124,b)
exten => 124-BUSY,2,Hangup()
exten => 124-CHANUNAVAIL,1,Voicemail(124,u)
exten => 124-CHANUNAVAIL,2,Hangup()
exten => 124-CONGESTION,1,Voicemail(124,u)
exten => 124-CONGESTION,2,Hangup()
exten => 124-ANSWER,1,Answer()
exten => 124-ANSWER,2,Hangup()

exten => 131,1,Dial(SIP/consultorio1,30)
exten => 131,2,Goto(131-${DIALSTATUS},1)
exten => 131-NOANSWER,1,Voicemail(131,u)
exten => 131-NOANSWER,2,Hangup()
exten => 131-BUSY,1,Voicemail(131,b)
exten => 131-BUSY,2,Hangup()
exten => 131-CHANUNAVAIL,1,Voicemail(131,u)
exten => 131-CHANUNAVAIL,2,Hangup()
exten => 131-CONGESTION,1,Voicemail(131,u)
exten => 131-CONGESTION,2,Hangup()
exten => 131-ANSWER,1,Answer()
exten => 131-ANSWER,2,Hangup()

exten => 106,1,Dial(SIP/consultorio2,30)
exten => 106,2,Goto(106-${DIALSTATUS},1)
exten => 106-NOANSWER,1,Voicemail(106,u)
exten => 106-NOANSWER,2,Hangup()
exten => 106-BUSY,1,Voicemail(106,b)
exten => 106-BUSY,2,Hangup()
exten => 106-CHANUNAVAIL,1,Voicemail(106,u)
exten => 106-CHANUNAVAIL,2,Hangup()
exten => 106-CONGESTION,1,Voicemail(106,u)
exten => 106-CONGESTION,2,Hangup()
exten => 106-ANSWER,1,Answer()
exten => 106-ANSWER,2,Hangup()

exten => 130,1,Dial(SIP/consultorio3,30)
exten => 130,2,Goto(130-${DIALSTATUS},1)
exten => 130-NOANSWER,1,Voicemail(130,u)
exten => 130-NOANSWER,2,Hangup()
exten => 130-BUSY,1,Voicemail(130,b)
exten => 130-BUSY,2,Hangup()
exten => 130-CHANUNAVAIL,1,Voicemail(130,u)
exten => 130-CHANUNAVAIL,2,Hangup()
exten => 130-CONGESTION,1,Voicemail(130,u)
exten => 130-CONGESTION,2,Hangup()
exten => 130-ANSWER,1,Answer()
exten => 130-ANSWER,2,Hangup()

exten => 555,1,Dial(SIP/mercamed)
exten => 555,n,answer
exten => 555,n,hangup

;--------------------------------------------------------------------
; LLAMADAS ALAND
;--------------------------------------------------------------------
;
exten => 111,1,Dial(dahdi/2/04143337456)
exten => 111,2,Answer()
exten => 111,3,Hangup

;-------------------------------------------------------
; CONSULTA DE SALDO DEL MOVISTAR
;-------------------------------------------------------
exten => _222,1,Dial(dahdi/2/*8)
exten => _222,n,Answer()
exten => _222,n,HangUp

;-------------------------------------------------------
; ANDRES
;-------------------------------------------------------
exten => _333,1,Dial(dahdi/1/04267135074)
exten => _333,n,Answer()
exten => _333,n,Hangup

;--------------------------------------------------------------------
; LLAMADAS ANALOGICAS ENTRANTES - REPICAN EN SIP ESPECIFICOS
;--------------------------------------------------------------------
exten => s/nemesis-7532232,1,Dial(dahdi/2/04143337456)
exten => s/nemesis-7532232,n,Answer()
exten => s/nemesis-7532232,n,HangUp

;exten => s/nemesis-7531277,1,Dial(SIP/recepcion)
;exten => s/nemesis-7531277,n,Answer()
;exten => s/nemesis-7531277,n,HangUp

exten => s/nemesis-04149122864,1,Dial(SIP/recepcion)
exten => s/nemesis-04149122864,n,Answer()
exten => s/nemesis-04149122864,n,HangUp

;---------------------------------
; PROTOTIPO IVR NEMESIS SUNIVOICE
;---------------------------------

exten => s/nemesis-7531277,1,Answer
exten => s/nemesis-7531277,n(bienvenida),BackGround(sunivoice/suni-bienvenido,m)
exten => s/nemesis-7531277,n(calidad),Background(sunivoice/suni-calidad,m)
;exten => s/nemesis-7531277,n(volver),Background(sunivoice/suni-menu-volver,m)
exten => s/nemesis-7531277,n(sunimenu),Read(digito,sunivoice/suni-menu,1,skip,4,8)
exten => s/nemesis-7531277,n,SayDigits(${digito})
exten => s/nemesis-7531277,n,Set(extension=${digito})
exten => s/nemesis-7531277,n,NoOp(valor de extension : ${extension} /
valor de digito : ${digito})
exten => s/nemesis-7531277,n(sunimenu0),Gotoif($[ "${digito}" =
"0"]?cuelga:sunimenu1)
exten => s/nemesis-7531277,n(sunimenu1),Gotoif($[ "${digito}" =
"1"]?menu1:sunimenu2)
exten => s/nemesis-7531277,n(sunimenu2),Gotoif($[ "${digito}" =
"2"]?menu2:sunimenu3)
exten => s/nemesis-7531277,n(sunimenu3),Gotoif($[ "${digito}" =
"3"]?menu3:sunimenu4)
exten => s/nemesis-7531277,n(sunimenu4),Gotoif($[ "${digito}" =
"4"]?menu4:sunimenu5)
exten => s/nemesis-7531277,n(sunimenu5),Gotoif($[ "${digito}" =
"5"]?menu5:sunimenu6)
exten => s/nemesis-7531277,n(sunimenu6),Gotoif($[ "${digito}" =
"6"]?menu6:sunimenu7)
exten => s/nemesis-7531277,n(sunimenu7),Gotoif($[ "${digito}" =
"7"]?menu7:sunimenu8)
exten => s/nemesis-7531277,n(sunimenu8),Gotoif($[ "${digito}" =
"8"]?menu8:sunimenu)

; ----------------------------------------
; menu opcion 1 horario
; menu opcion 2 ubicacion
; menu opcion 3 tratamientos
; menu opcion 4 precios
; menu opcion 5 recepcion
; menu opcion 6 personal medico
; menu opcion 7 asistencia administrativa
; menu opcion 8 administracion
; ----------------------------------------
; menu personal medico yetsica berroeta
; menu personal medico maria divinola
; menu personal medico aland marcano
;-----------------------------------------
exten => s/nemesis-7531277,n(menu1),Background(sunivoice/suni-horario,m)
exten => s/nemesis-7531277,n,Goto(s/nemesis-7531277,sunimenu)
exten => s/nemesis-7531277,n(menu2),Background(sunivoice/suni-ubicacion,m)
exten => s/nemesis-7531277,n,Goto(s/nemesis-7531277,sunimenu)
exten => s/nemesis-7531277,n(menu3),Macro(recepcion)
exten => s/nemesis-7531277,n,Goto(s/nemesis-7531277,sunimenu)
exten => s/nemesis-7531277,n(menu4),Macro(recepcion)
exten => s/nemesis-7531277,n(menu5),Macro(recepcion)
exten => s/nemesis-7531277,n,Goto(s/nemesis-7531277,cuelga)

;-------------------------
; submenu personal medico
;-------------------------
exten => s/nemesis-7531277,n(menu6),Read(digito,sunivoice/suni-doctores,1,skip,4,8)
exten => s/nemesis-7531277,n,SayDigits(${digito})
exten => s/nemesis-7531277,n,Set(extension=${digito})
exten => s/nemesis-7531277,n,NoOp(valor de extension : ${extension} /
valor de digito : ${digito})
exten => s/nemesis-7531277,n(medico0),Gotoif($[ "${digito}" =
"0"]?sunimenu:medico1)
exten => s/nemesis-7531277,n(medico1),Gotoif($[ "${digito}" =
"1"]?consultorio1:medico2)
exten => s/nemesis-7531277,n(medico2),Gotoif($[ "${digito}" =
"2"]?consultorio2:medico3)
exten => s/nemesis-7531277,n(medico3),Gotoif($[ "${digito}" =
"3"]?consultorio3:menu6)

;-----------------------------------
; submenu asistencia administrativa
;-----------------------------------
exten => s/nemesis-7531277,n(menu7),Dial(SIP/aadministracion,30)
exten => s/nemesis-7531277,n,Gotoif($[ "${DIALSTATUS}" =
"CHANUNAVAIL"]?ischanunavail:busy)
exten => s/nemesis-7531277,n(ischanunavail),Voicemail(128,u)
exten => s/nemesis-7531277,n(busy),Gotoif($[ "${DIALSTATUS}" =
"BUSY"]?isbusy:congestion)
exten => s/nemesis-7531277,n(isbusy),Voicemail(128,b)
exten => s/nemesis-7531277,n(congestion),Gotoif($[ "${DIALSTATUS}" =
"CONGESTION"]?iscongestion:noanswer)
exten => s/nemesis-7531277,n(iscongestion),Voicemail(128,u)
exten => s/nemesis-7531277,n(noanswer),Gotoif($[ "${DIALSTATUS}" =
"NOANSWER"]?isnoanswer:answer)
exten => s/nemesis-7531277,n(isnoanswer),Voicemail(128,u)
exten => s/nemesis-7531277,n(answer),Gotoif($[ "${DIALSTATUS}" =
"ANSWER"]?isanswer:cuelga)
exten => s/nemesis-7531277,n(isanswer),Answer
exten => s/nemesis-7531277,n,Hangup

;-----------------------
; submenu administracion
;-----------------------
exten => s/nemesis-7531277,n(menu8),Dial(SIP/administracion,30)
exten => s/nemesis-7531277,n,Gotoif($[ "${DIALSTATUS}" =
"CHANUNAVAIL"]?ischanunavail:busy)
exten => s/nemesis-7531277,n(ischanunavail),Voicemail(126,u)
exten => s/nemesis-7531277,n(busy),Gotoif($[ "${DIALSTATUS}" =
"BUSY"]?isbusy:congestion)
exten => s/nemesis-7531277,n(isbusy),Voicemail(126,b)
exten => s/nemesis-7531277,n(congestion),Gotoif($[ "${DIALSTATUS}" =
"CONGESTION"]?iscongestion:noanswer)
exten => s/nemesis-7531277,n(iscongestion),Voicemail(126,u)
exten => s/nemesis-7531277,n(noanswer),Gotoif($[ "${DIALSTATUS}" =
"NOANSWER"]?isnoanswer:answer)
exten => s/nemesis-7531277,n(isnoanswer),Voicemail(126,u)
exten => s/nemesis-7531277,n(answer),Gotoif($[ "${DIALSTATUS}" =
"ANSWER"]?isanswer:cuelga)
exten => s/nemesis-7531277,n(isanswer),Answer
exten => s/nemesis-7531277,n,Hangup

;----------------------
; submenu consultorio1
;----------------------
exten => s/nemesis-7531277,n(consultorio1),Macro(recepcion)
exten => s/nemesis-7531277,n,Gotoif($[ "${DIALSTATUS}" =
"CHANUNAVAIL"]?ischanunavail:busy)
exten => s/nemesis-7531277,n(ischanunavail),Voicemail(131@default)
exten => s/nemesis-7531277,n(busy),Gotoif($[ "${DIALSTATUS}" =
"BUSY"]?isbusy:congestion)
exten => s/nemesis-7531277,n(isbusy),Voicemail(131@default)
exten => s/nemesis-7531277,n(congestion),Gotoif($[ "${DIALSTATUS}" =
"CONGESTION"]?iscongestion:noanswer)
exten => s/nemesis-7531277,n(iscongestion),Voicemail(131@default)
exten => s/nemesis-7531277,n(noanswer),Gotoif($[ "${DIALSTATUS}" =
"NOANSWER"]?isnoanswer:answer)
exten => s/nemesis-7531277,n(isnoanswer),Voicemail(131@default)
exten => s/nemesis-7531277,n(answer),Gotoif($[ "${DIALSTATUS}" =
"ANSWER"]?isanswer:cuelga)
exten => s/nemesis-7531277,n(isanswer),Answer
exten => s/nemesis-7531277,n,Hangup

;----------------------
; submenu consultorio2
;----------------------
exten => s/nemesis-7531277,n(consultorio2),Macro(recepcion)
exten => s/nemesis-7531277,n,Gotoif($[ "${DIALSTATUS}" =
"CHANUNAVAIL"]?ischanunavail:busy)
exten => s/nemesis-7531277,n(ischanunavail),Voicemail(106,u)
exten => s/nemesis-7531277,n(busy),Gotoif($[ "${DIALSTATUS}" =
"BUSY"]?isbusy:congestion)
exten => s/nemesis-7531277,n(isbusy),Voicemail(106,b)
exten => s/nemesis-7531277,n(congestion),Gotoif($[ "${DIALSTATUS}" =
"CONGESTION"]?iscongestion:noanswer)
exten => s/nemesis-7531277,n(iscongestion),Voicemail(106,u)
exten => s/nemesis-7531277,n(noanswer),Gotoif($[ "${DIALSTATUS}" =
"NOANSWER"]?isnoanswer:answer)
exten => s/nemesis-7531277,n(isnoanswer),Voicemail(106,u)
exten => s/nemesis-7531277,n(answer),Gotoif($[ "${DIALSTATUS}" =
"ANSWER"]?isanswer:cuelga)
exten => s/nemesis-7531277,n(isanswer),Answer
exten => s/nemesis-7531277,n,Hangup

;----------------------
; submenu consultorio3
;----------------------
exten => s/nemesis-7531277,n(consultorio3),Dial(dahdi/2/04143337456)
exten => s/nemesis-7531277,n,Goto(s/nemesis-7531277,cuelga)

; ------------------------------
; termina todo el menu principal
; ------------------------------
exten => s/nemesis-7531277,n(cuelga),Hangup

;--------------------------------------------------------------------
; LLAMADAS SALIENTES VIA CENTRAL IP NEMESIS
; 1.- 6 DE JUNIO 2011 PRIMERA VERSION
;--------------------------------------------------------------------
exten => _9.,1,Set(CANAL=${CUT(CHANNEL,,1)})
exten => _9.,2,Set(EXTENSION=${EXTEN})
exten => _9.,3,GoToIf($["${CANAL}" =
"SIP/aadministracion"]?llamadas-salientes,s,3:4)
exten => _9.,4,GoToIf($["${CANAL}" = "SIP/recepcion"]?llamadas-salientes,s,5:5)
exten => _9.,5,GoToIf($["${CANAL}" =
"SIP/administracion"]?llamadas-salientes,s,2:6)
exten => _9.,6,GoToIf($["${CANAL}" = "SIP/mercamed"]?llamadas-salientes,s,4:8)

;-------------------------------------------------------------------------------------------
; LLAMADAS SALIENTES VIA CENTRAL IP NEMESIS
; 1.- SEGUNDO SEGMENTO DISCA EL CANAL DAHDI QUE LE CORRESPONDE AL SIP
SEGUN EL PRIMER SEGMENTO
; 2.- LLAMA A LA MACRO UNIVERSAL DE DISCADO
;-------------------------------------------------------------------------------------------
[llamadas-salientes]
exten => s,2,Macro(nemesis,${7531277},${EXTENSION:1})
exten => s,3,Macro(verificacero,${7531277},${EXTENSION:1})
exten => s,4,Macro(nemesis,${7532232},${EXTENSION:1})
exten => s,5,Macro(verificacero-recepcion,${7531277},${EXTENSION:1})

;-------------------------------------------------------
; MACRO DE DISCADO BLOQUEA EL CERO PARA LAS LLAMADAS SALIENTES
;-------------------------------------------------------
[macro-verificacero]
exten => s,1,NoOp( ARG1-CANAL=${ARG1} ARG2-EXTEN=${ARG2} )
exten => s,2,Set(DIGITOS=${ARG2:0:4})
exten => s,3,NoOp( VALOR DE DIGITOS=${DIGITOS} )
exten => s,4,GoToIf($["${DIGITOS:0:4}" = "0800"]?llamadas-salientes,s,2:5)
exten => s,5,GoToIf($["${DIGITOS:0:4}" = "0500"]?llamadas-salientes,s,2:6)
exten => s,6,GoToIf($["${DIGITOS:0:4}" = "0501"]?llamadas-salientes,s,2:7)
exten => s,7,GoToIf($["${DIGITOS:0:2}" = "04"]?llamada-restringida,s,2:8)
exten => s,8,GoToIf($["${DIGITOS:0:2}" = "02"]?llamada-restringida,s,2:9)
exten => s,9,GoToIf($["${DIGITOS:0:2}" =
"00"]?llamada-restringida,s,2:llamadas-salientes,s,2)
[macro-verificacero-recepcion]
exten => s,1,NoOp( ARG1-CANAL=${ARG1} ARG2-EXTEN=${ARG2} )
exten => s,2,Set(DIGITOS=${ARG2:0:4})
exten => s,3,NoOp( VALOR DE DIGITOS=${DIGITOS} )
exten => s,4,GoToIf($["${DIGITOS:0:4}" = "0800"]?llamadas-salientes,s,2:5)
exten => s,5,GoToIf($["${DIGITOS:0:4}" = "0500"]?llamadas-salientes,s,2:6)
exten => s,6,GoToIf($["${DIGITOS:0:4}" = "0501"]?llamadas-salientes,s,2:7)

;-------------------------------------------------------
; LLAMADAS RESTRINGIDAS
;-------------------------------------------------------
[llamada-restringida]
exten => s,2,Playback(privacy-incorrect)
exten => s,3,Hangup

;-------------------------------------------------------
; MACRO UNIVERSAL DE DISCADO PARA LAS LLAMADAS SALIENTES
;-------------------------------------------------------
[macro-nemesis]
exten => s,1,NoOp( ARG1-CANAL=${ARG1} ARG2-EXTEN=${ARG2} )
exten => s,2,Dial(${ARG1}/${ARG2})
exten => s,3,Hangup()

[macro-recepcion]
exten => s,1,Dial(SIP/recepcion)
exten => s,2,Goto(s-${DIALSTATUS},1)
exten => s-NOANSWER,1,Voicemail(124,u)
exten => s-NOANSWER,2,Hangup()
exten => s-BUSY,1,Voicemail(124,b)
exten => s-BUSY,2,Hangup()
exten => s-CHANUNAVAIL,1,Voicemail(124,u)
exten => s-CHANUNAVAIL,2,Hangup()
exten => s-CONGESTION,1,Voicemail(124,u)
exten => s-CONGESTION,2,Hangup()
exten => s-ANSWER,1,Answer()
exten => s-ANSWER,2,Hangup()

[demo]
include => stdexten
;
; We start with what to do when a call first comes in.
;
exten => s,1,Wait(1)                    ; Wait a second, just for fun
exten => s,n,Answer                     ; Answer the line
exten => s,n,Set(TIMEOUT(digit)=5)      ; Set Digit Timeout to 5 seconds
exten => s,n,Set(TIMEOUT(response)=10)  ; Set Response Timeout to 10 seconds
exten => s,n(restart),BackGround(demo-congrats) ; Play a congratulatory message
exten => s,n(instruct),BackGround(demo-instruct)        ; Play some instructions
exten => s,n,WaitExten                  ; Wait for an extension to be dialed.

exten => 2,1,BackGround(demo-moreinfo)  ; Give some more information.
exten => 2,n,Goto(s,instruct)

exten => 3,1,Set(LANGUAGE()=fr)         ; Set language to french
exten => 3,n,Goto(s,restart)            ; Start with the congratulations

exten => 1000,1,Goto(default,s,1)
;
; We also create an example user, 1234, who is on the console and has
; voicemail, etc.
;
exten => 1234,1,Playback(transfer,skip)         ; "Please hold while..."
                                        ; (but skip if channel is not up)
exten => 1234,n,Gosub(${EXTEN},stdexten(${GLOBAL(CONSOLE)}))
exten => 1234,n,Goto(default,s,1)               ; exited Voicemail

exten => 1235,1,Voicemail(1234,u)               ; Right to voicemail

exten => 1236,1,Dial(Console/dsp)               ; Ring forever
exten => 1236,n,Voicemail(1234,b)               ; Unless busy

;
; # for when they're done with the demo
;
exten => #,1,Playback(demo-thanks)      ; "Thanks for trying the demo"
exten => #,n,Hangup                     ; Hang them up.

;
; A timeout and "invalid extension rule"
;
exten => t,1,Goto(#,1)                  ; If they take too long, give up
;exten => i,1,Playback(invalid)         ; "That's not valid, try again"

;
; Create an extension, 500, for dialing the
; Asterisk demo.
;
exten => 500,1,Playback(demo-abouttotry); Let them know what's going on
exten => 500,n,Dial(IAX2/guest@pbx.digium.com/s@default)        ; Call the
Asterisk demo
exten => 500,n,Playback(demo-nogo)      ; Couldn't connect to the demo site
exten => 500,n,Goto(s,6)                ; Return to the start over message.

;
; Create an extension, 600, for evaluating echo latency.
;
exten => 600,1,Playback(demo-echotest)  ; Let them know what's going on
exten => 600,n,Echo                     ; Do the echo test
exten => 600,n,Playback(demo-echodone)  ; Let them know it's over
exten => 600,n,Goto(s,6)                ; Start over

;
;       You can use the Macro Page to intercom a individual user
exten => 76245,1,Macro(page,SIP/Grandstream1)
; or if your peernames are the same as extensions
exten => _7XXX,1,Macro(page,SIP/${EXTEN})
;
;
; System Wide Page at extension 7999
;
exten => 7999,1,Set(TIMEOUT(absolute)=60)
exten => 7999,2,Page(Local/Grandstream1@page&Local/Xlite1@page&Local/1234@page/n,d)

; Give voicemail at extension 8500
;
exten => 8500,1,VoicemailMain
exten => 8500,n,Goto(s,6)
;
; Here's what a phone entry would look like (IXJ for example)
;
;exten => 1265,1,Dial(Phone/phone0,15)
;exten => 1265,n,Goto(s,5)

;
;       The page context calls up the page macro that sets variables needed
for auto-answer
;       It is in is own context to make calling it from the Page()
application as simple as
;       Local/{peername}@page
;
